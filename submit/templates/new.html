{% extends "base.html" %}
{% load bootstrap %}

{% block title %}
    {{ block.super }} - New Submission
{% endblock %}

{% block style %}
{{ block.super }}
@import url("{{ STATIC_URL }}chosen/chosen.css");
{% endblock %}

{% block scripts %}
{{ block.super }}
<script type="text/javascript" src="{{ STATIC_URL }}chosen/chosen.jquery.min.js"></script>
{% endblock %}

{% block docready %}
$('#id_authors').chosen({max_selected_options: {{assignment.course.max_authors}} });
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>
        New Submission<br/>
        <small>{{ assignment }} ({{ assignment.course }})</small>
    </h1>
</div>

<div class="hero-unit">
	<h4>Please note:</h4>
	{% if assignment.attachment_is_tested %}
			Your file attachment is automatically tested for validity. Invalid submissions are
			not accepted for grading.<br/>Validations are processed in order of arrival, you will be informed by eMail. A valid upload fulfills at least the following conditions:
			<ul>
				<li>The uploaded file is a TGZ or ZIP archive.</li>
				{% if assignment.attachment_test_compile %}
					<li>After unpacking, a 'make' call can be issued to build the sources.</li>
				{% endif %}
				{% if assignment.attachment_test_validity %}
					<li>After successful building, the application can be executed as described in the <a href="{{ assignment.download }}">assignment description</a>.</li>
				{% endif %}
			</ul>
			The console output and exit code for the compilation / test run is available in the submission details.			
	{% else %}
	    	You can find further information in the <a href="{{ assignment.download }}">assignment description</a>.
	{% endif %}
	{% if assignment.course.max_authors > 1 %}
		<br/>A maximum of {{ assignment.course.max_authors }} author(s) is allowed. You are added automatically.
		
	{% endif %}
</div>

<form action="." method="post" enctype="multipart/form-data" class="form-horizontal">
 {% csrf_token %}
<table>
{{ submissionForm|bootstrap }}
</table>
{% if assignment.has_attachment %}
	<table>
	{{ filesForm|bootstrap }}
	</table>
{% endif %}
<p>
<button type="submit" href="." class="btn primary"><i class="icon icon-ok"></i> Save</button>
</p>
</form>

{% endblock %}